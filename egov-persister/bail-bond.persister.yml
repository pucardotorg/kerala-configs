serviceMaps:
  serviceName: Bail Bond
  mappings:
    - version: 1.0
      description: Persists bail bond details in tables
      fromTopic: save-bail-application
      isTransaction: true
      isAuditEnabled: true
      module: BAIL BOND
      objecIdJsonPath: $.id
      tenantIdJsonPath: $.tenantId
      transactionCodeJsonPath: $.caseId
      auditAttributeBasePath: bail
      queryMaps:
        - query: INSERT INTO dristi_bail(id,tenant_id,case_id,bail_type,bail_amount,bail_status,court_id,case_title,case_number,cnr_number,filing_number,case_type,litigant_id,litigant_name,litigant_father_name,litigant_signed,litigant_mobile_number,shortened_url,bail_id,as_user,additional_details,is_active,created_by,last_modified_by,created_time,last_modified_time) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);
          basePath: bail
          jsonMaps:
            - jsonPath: $.bail.id
            - jsonPath: $.bail.tenantId
            - jsonPath: $.bail.caseId
            - jsonPath: $.bail.bailType
            - jsonPath: $.bail.bailAmount
            - jsonPath: $.bail.status
            - jsonPath: $.bail.courtId
            - jsonPath: $.bail.caseTitle
            - jsonPath: $.bail.caseNumber
            - jsonPath: $.bail.cnrNumber
            - jsonPath: $.bail.filingNumber
            - jsonPath: $.bail.caseType
            - jsonPath: $.bail.litigantId
            - jsonPath: $.bail.litigantName
            - jsonPath: $.bail.litigantFatherName
            - jsonPath: $.bail.litigantSigned
            - jsonPath: $.bail.litigantMobileNumber
            - jsonPath: $.bail.shortenedURL
            - jsonPath: $.bail.bailId
            - jsonPath: $.bail.asUser
            - jsonPath: $.bail.additionalDetails
              type: JSON
              dbType: JSONB
            - jsonPath: $.bail.isActive
            - jsonPath: $.bail.auditDetails.createdBy
            - jsonPath: $.bail.auditDetails.lastModifiedBy
            - jsonPath: $.bail.auditDetails.createdTime
            - jsonPath: $.bail.auditDetails.lastModifiedTime

        - query: INSERT INTO dristi_surety (id,tenant_id,index,bail_id,case_id,surety_name,surety_father_name,surety_signed,surety_mobile_number,surety_email,surety_approved,surety_address,additional_details,is_active,created_by,last_modified_by,created_time,last_modified_time) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);
          basePath: bail.sureties.*
          jsonMaps:
            - jsonPath: $.bail.sureties.*.id
            - jsonPath: $.bail.sureties.*.tenantId
            - jsonPath: $.bail.sureties.*.index
            - jsonPath: $.bail.id
            - jsonPath: $.bail.caseId
            - jsonPath: $.bail.sureties.*.name
            - jsonPath: $.bail.sureties.*.fatherName
            - jsonPath: $.bail.sureties.*.hasSigned
            - jsonPath: $.bail.sureties.*.mobileNumber
            - jsonPath: $.bail.sureties.*.email
            - jsonPath: $.bail.sureties.*.isApproved
            - jsonPath: $.bail.sureties.*.address
              type: JSON
              dbType: JSONB
            - jsonPath: $.bail.sureties.*.additionalDetails
              type: JSON
              dbType: JSONB
            - jsonPath: $.bail.sureties.*.isActive
            - jsonPath: $.bail.auditDetails.createdBy
            - jsonPath: $.bail.auditDetails.lastModifiedBy
            - jsonPath: $.bail.auditDetails.createdTime
            - jsonPath: $.bail.auditDetails.lastModifiedTime



        - query: INSERT INTO dristi_bail_document(id,tenant_id,bail_id,filestore_id,document_uid,document_name,document_type,additional_details,is_active,created_by,last_modified_by,created_time,last_modified_time) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?);
          basePath: bail.documents.*
          jsonMaps:
            - jsonPath: $.bail.documents.*.id
            - jsonPath: $.bail.tenantId
            - jsonPath: $.bail.id
            - jsonPath: $.bail.documents.*.fileStore
            - jsonPath: $.bail.documents.*.documentUid
            - jsonPath: $.bail.documents.*.documentName
            - jsonPath: $.bail.documents.*.documentType
            - jsonPath: $.bail.documents.*.additionalDetails
              type: JSON
              dbType: JSONB
            - jsonPath: $.bail.documents.*.isActive
            - jsonPath: $.bail.auditDetails.createdBy
            - jsonPath: $.bail.auditDetails.lastModifiedBy
            - jsonPath: $.bail.auditDetails.createdTime
            - jsonPath: $.bail.auditDetails.lastModifiedTime

        - query: INSERT INTO dristi_surety_document(id,tenant_id,surety_id,filestore_id,document_uid,document_name,document_type,additional_details,is_active,created_by,last_modified_by,created_time,last_modified_time) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?);
          basePath: bail.sureties.*.documents.*
          jsonMaps:
            - jsonPath: $.bail.sureties.*.documents.*.id
            - jsonPath: $.bail.tenantId
            - jsonPath: $.bail.sureties[*][?({id} in @.documents[*].id)].id
            - jsonPath: $.bail.sureties.*.documents.*.fileStore
            - jsonPath: $.bail.sureties.*.documents.*.documentUid
            - jsonPath: $.bail.sureties.*.documents.*.documentName
            - jsonPath: $.bail.sureties.*.documents.*.documentType
            - jsonPath: $.bail.sureties.*.documents.*.additionalDetails
              type: JSON
              dbType: JSONB
            - jsonPath: $.bail.sureties.*.documents.*.isActive
            - jsonPath: $.bail.auditDetails.createdBy
            - jsonPath: $.bail.auditDetails.lastModifiedBy
            - jsonPath: $.bail.auditDetails.createdTime
            - jsonPath: $.bail.auditDetails.lastModifiedTime

    - version: 1.0
      description: Persists bail bond details in tables
      fromTopic: update-bail-application
      isTransaction: true
      isAuditEnabled: true
      module: BAIL BOND
      objecIdJsonPath: $.id
      tenantIdJsonPath: $.tenantId
      transactionCodeJsonPath: $.caseId
      auditAttributeBasePath: bail
      queryMaps:
        - query: UPDATE dristi_bail SET tenant_id=?,case_id=?,bail_type=?,bail_amount=?,bail_status=?,court_id=?,case_title=?,case_number=?,cnr_number=?,filing_number=?,case_type=?,litigant_id=?,litigant_name=?,litigant_father_name=?,litigant_signed=?,litigant_mobile_number=?,shortened_url=?,as_user=?,additional_details=?,is_active=?,created_by=?,last_modified_by=?,created_time=?,last_modified_time=? WHERE bail_id=?;
          basePath: bail
          jsonMaps:
            - jsonPath: $.bail.tenantId
            - jsonPath: $.bail.caseId
            - jsonPath: $.bail.bailType
            - jsonPath: $.bail.bailAmount
            - jsonPath: $.bail.status
            - jsonPath: $.bail.courtId
            - jsonPath: $.bail.caseTitle
            - jsonPath: $.bail.caseNumber
            - jsonPath: $.bail.cnrNumber
            - jsonPath: $.bail.filingNumber
            - jsonPath: $.bail.caseType
            - jsonPath: $.bail.litigantId
            - jsonPath: $.bail.litigantName
            - jsonPath: $.bail.litigantFatherName
            - jsonPath: $.bail.litigantSigned
            - jsonPath: $.bail.litigantMobileNumber
            - jsonPath: $.bail.shortenedURL
            - jsonPath: $.bail.asUser
            - jsonPath: $.bail.additionalDetails
              type: JSON
              dbType: JSONB
            - jsonPath: $.bail.isActive
            - jsonPath: $.bail.auditDetails.createdBy
            - jsonPath: $.bail.auditDetails.lastModifiedBy
            - jsonPath: $.bail.auditDetails.createdTime
            - jsonPath: $.bail.auditDetails.lastModifiedTime
            - jsonPath: $.bail.bailId

        - query: INSERT INTO dristi_surety (id,tenant_id,index,bail_id,case_id,surety_name,surety_father_name,surety_signed,surety_mobile_number,surety_email,surety_approved,surety_address,additional_details,is_active,created_by,last_modified_by,created_time,last_modified_time) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) ON CONFLICT (id) DO UPDATE SET tenant_id = EXCLUDED.tenant_id,bail_id = EXCLUDED.bail_id,case_id = EXCLUDED.case_id,surety_name = EXCLUDED.surety_name,surety_father_name = EXCLUDED.surety_father_name,surety_signed = EXCLUDED.surety_signed,surety_mobile_number = EXCLUDED.surety_mobile_number,surety_email = EXCLUDED.surety_email,surety_approved = EXCLUDED.surety_approved,surety_address = EXCLUDED.surety_address,additional_details = EXCLUDED.additional_details,is_active = EXCLUDED.is_active,created_by = EXCLUDED.created_by,last_modified_by = EXCLUDED.last_modified_by,created_time = EXCLUDED.created_time,last_modified_time = EXCLUDED.last_modified_time;
          basePath: bail.sureties.*
          jsonMaps:
            - jsonPath: $.bail.sureties.*.id
            - jsonPath: $.bail.sureties.*.tenantId
            - jsonPath: $.bail.sureties.*.index
            - jsonPath: $.bail.id
            - jsonPath: $.bail.caseId
            - jsonPath: $.bail.sureties.*.name
            - jsonPath: $.bail.sureties.*.fatherName
            - jsonPath: $.bail.sureties.*.hasSigned
            - jsonPath: $.bail.sureties.*.mobileNumber
            - jsonPath: $.bail.sureties.*.email
            - jsonPath: $.bail.sureties.*.isApproved
            - jsonPath: $.bail.sureties.*.address
              type: JSON
              dbType: JSONB
            - jsonPath: $.bail.sureties.*.additionalDetails
              type: JSON
              dbType: JSONB
            - jsonPath: $.bail.sureties.*.isActive
            - jsonPath: $.bail.auditDetails.createdBy
            - jsonPath: $.bail.auditDetails.lastModifiedBy
            - jsonPath: $.bail.auditDetails.createdTime
            - jsonPath: $.bail.auditDetails.lastModifiedTime



        - query: INSERT INTO dristi_bail_document (id,tenant_id,bail_id,filestore_id,document_uid,document_name,document_type,additional_details,is_active,created_by,last_modified_by,created_time,last_modified_time) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?) ON CONFLICT (id) DO UPDATE SET tenant_id=EXCLUDED.tenant_id,bail_id=EXCLUDED.bail_id,filestore_id = EXCLUDED.filestore_id,document_uid = EXCLUDED.document_uid,document_name = EXCLUDED.document_name,document_type = EXCLUDED.document_type,additional_details = EXCLUDED.additional_details,is_active=EXCLUDED.is_active,created_by = EXCLUDED.created_by,last_modified_by = EXCLUDED.last_modified_by,created_time = EXCLUDED.created_time,last_modified_time = EXCLUDED.last_modified_time;
          basePath: bail.documents.*
          jsonMaps:
            - jsonPath: $.bail.documents.*.id
            - jsonPath: $.bail.documents.*.tenantId
            - jsonPath: $.bail.id
            - jsonPath: $.bail.documents.*.fileStore
            - jsonPath: $.bail.documents.*.documentUid
            - jsonPath: $.bail.documents.*.documentName
            - jsonPath: $.bail.documents.*.documentType
            - jsonPath: $.bail.documents.*.additionalDetails
              type: JSON
              dbType: JSONB
            - jsonPath: $.bail.documents.*.isActive
            - jsonPath: $.bail.auditDetails.createdBy
            - jsonPath: $.bail.auditDetails.lastModifiedBy
            - jsonPath: $.bail.auditDetails.createdTime
            - jsonPath: $.bail.auditDetails.lastModifiedTime

        - query: INSERT INTO dristi_surety_document (id,tenant_id,surety_id,filestore_id,document_uid,document_name,document_type,additional_details,is_active,created_by,last_modified_by,created_time,last_modified_time) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?) ON CONFLICT (id) DO UPDATE SET tenant_id=EXCLUDED.tenant_id,surety_id=EXCLUDED.surety_id,filestore_id = EXCLUDED.filestore_id,document_uid = EXCLUDED.document_uid,document_name=EXCLUDED.document_name,document_type = EXCLUDED.document_type,additional_details = EXCLUDED.additional_details,is_active=EXCLUDED.is_active,created_by = EXCLUDED.created_by,last_modified_by = EXCLUDED.last_modified_by,created_time = EXCLUDED.created_time,last_modified_time = EXCLUDED.last_modified_time;
          basePath: bail.sureties.*.documents.*
          jsonMaps:
            - jsonPath: $.bail.sureties.*.documents.*.id
            - jsonPath: $.bail.sureties.*.documents.*.tenantId
            - jsonPath: $.bail.sureties[*][?({id} in @.documents[*].id)].id
            - jsonPath: $.bail.sureties.*.documents.*.fileStore
            - jsonPath: $.bail.sureties.*.documents.*.documentUid
            - jsonPath: $.bail.sureties.*.documents.*.documentName
            - jsonPath: $.bail.sureties.*.documents.*.documentType
            - jsonPath: $.bail.sureties.*.documents.*.additionalDetails
              type: JSON
              dbType: JSONB
            - jsonPath: $.bail.sureties.*.documents.*.isActive
            - jsonPath: $.bail.auditDetails.createdBy
            - jsonPath: $.bail.auditDetails.lastModifiedBy
            - jsonPath: $.bail.auditDetails.createdTime
            - jsonPath: $.bail.auditDetails.lastModifiedTime
