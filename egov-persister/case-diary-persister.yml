serviceMaps:
  serviceName: case-diary
  mappings:
    - version: 1.0
      description: Persists diary entry details in table
      fromTopic: create-diary-entry
      isTransaction: true
      isAuditEnabled: true
      module: case-diary
      objecIdJsonPath: $.id
      tenantIdJsonPath: $.tenantId
      auditAttributeBasePath: diaryEntry
      queryMaps:
        - query: INSERT INTO dristi_diaryentries(id,tenant_id,case_number,entry_date,businessOfDay,judge_id,reference_id,reference_type,hearingDate,additional_details,created_by,last_modified_by,created_time,last_modified_time) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
          basePath: diaryEntry
          jsonMaps:
            - jsonPath: $.diaryEntry.id
            - jsonPath: $.diaryEntry.tenantId
            - jsonPath: $.diaryEntry.caseNumber
            - jsonPath: $.diaryEntry.entryDate
            - jsonPath: $.diaryEntry.businessOfDay
            - jsonPath: $.diaryEntry.judgeId
            - jsonPath: $.diaryEntry.referenceId
            - jsonPath: $.diaryEntry.referenceType
            - jsonPath: $.diaryEntry.hearingDate
            - jsonPath: $.diaryEntry.additionalDetails
              type: JSON
              dbType: JSONB
            - jsonPath: $.diaryEntry.auditDetails.createdBy
            - jsonPath: $.diaryEntry.auditDetails.lastModifiedBy
            - jsonPath: $.diaryEntry.auditDetails.createdTime
            - jsonPath: $.diaryEntry.auditDetails.lastModifiedTime

    - version: 1.0
      description: Persists diary entry details in table
      fromTopic: update-diary-entry
      isTransaction: true
      isAuditEnabled: true
      module: case-diary
      objecIdJsonPath: $.id
      tenantIdJsonPath: $.tenantId
      auditAttributeBasePath: diaryEntry
      queryMaps:
        - query: UPDATE dristi_diaryentries SET tenant_id=?,case_number=?,entry_date=?,businessOfDay=?,judge_id=?,reference_id=?,reference_type=?,hearingDate=?,additional_details=?,last_modified_by=?,last_modified_time=? where id=?;
          basePath: diaryEntry
          jsonMaps:
            - jsonPath: $.diaryEntry.tenantId
            - jsonPath: $.diaryEntry.caseNumber
            - jsonPath: $.diaryEntry.entryDate
            - jsonPath: $.diaryEntry.businessOfDay
            - jsonPath: $.diaryEntry.judgeId
            - jsonPath: $.diaryEntry.referenceId
            - jsonPath: $.diaryEntry.referenceType
            - jsonPath: $.diaryEntry.hearingDate
            - jsonPath: $.diaryEntry.additionalDetails
              type: JSON
              dbType: JSONB
            - jsonPath: $.diaryEntry.auditDetails.lastModifiedBy
            - jsonPath: $.diaryEntry.auditDetails.lastModifiedTime
            - jsonPath: $.diaryEntry.id
